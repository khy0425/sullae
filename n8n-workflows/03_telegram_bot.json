{
  "name": "ìˆ ë˜ - Telegram ë´‡ ì•Œë¦¼",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "meeting-created",
        "options": {}
      },
      "id": "webhook-tg-1",
      "name": "Webhook - New Meeting",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [250, 300]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "daily-stats",
        "options": {}
      },
      "id": "webhook-tg-2",
      "name": "Webhook - Daily Stats",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [250, 500]
    },
    {
      "parameters": {
        "jsCode": "const data = $input.first().json;\n\n// ê²Œì„ íƒ€ì… ì´ëª¨ì§€\nconst gameEmojis = {\n  'ê²½ì°°ê³¼ ë„ë‘‘': 'ğŸ‘®',\n  'ì–¼ìŒë•¡': 'ğŸ§Š',\n  'ìˆ¨ë°”ê¼­ì§ˆ': 'ğŸ‘€',\n  'ê¹ƒë°œëºê¸°': 'ğŸš©',\n  'ì»¤ìŠ¤í…€': 'ğŸ®'\n};\nconst emoji = gameEmojis[data.gameTypeName] || 'ğŸƒ';\n\nconst message = `${emoji} *ìƒˆë¡œìš´ ìˆ ë˜ì¡ê¸° ëª¨ì„!*\n\nğŸ“ ì¥ì†Œ: ${data.location}\nğŸ® ê²Œì„: ${data.gameTypeName}\nâ° ì‹œê°„: ${data.meetingTimeFormatted}\nğŸ‘¥ ëª¨ì§‘: ${data.maxParticipants}ëª…\n\nğŸ”‘ ì°¸ê°€ì½”ë“œ: \\`${data.joinCode}\\`\n\n[ì•±ì—ì„œ ì°¸ê°€í•˜ê¸°](https://sullae.app/join/${data.joinCode})`;\n\nreturn [{ json: { message, chatId: 'YOUR_TELEGRAM_CHAT_ID' } }];"
      },
      "id": "code-tg-1",
      "name": "Format Telegram Message",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [450, 300]
    },
    {
      "parameters": {
        "jsCode": "const data = $input.first().json;\nconst stats = data.stats;\n\nconst message = `ğŸ“Š *ìˆ ë˜ ì¼ì¼ ë¦¬í¬íŠ¸*\nğŸ“… ${data.date}\n\nğŸ“ˆ ì˜¤ëŠ˜ì˜ ì„±ê³¼:\nâ€¢ ì‹ ê·œ ê°€ì…: ${stats.newUsers}ëª…\nâ€¢ ëª¨ì„ ìƒì„±: ${stats.newMeetings}ê°œ\n\nğŸ“Š ëˆ„ì  í˜„í™©:\nâ€¢ ì´ ì‚¬ìš©ì: ${stats.totalUsers.toLocaleString()}ëª…\nâ€¢ ì´ ëª¨ì„: ${stats.totalMeetings.toLocaleString()}ê°œ`;\n\nreturn [{ json: { message, chatId: 'YOUR_TELEGRAM_ADMIN_CHAT_ID' } }];"
      },
      "id": "code-tg-2",
      "name": "Format Stats Message",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [450, 500]
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "={{ $json.message }}",
        "additionalFields": {
          "parse_mode": "Markdown",
          "disable_web_page_preview": false
        }
      },
      "id": "telegram-1",
      "name": "Send Telegram - New Meeting",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [650, 300],
      "credentials": {
        "telegramApi": {
          "id": "YOUR_TELEGRAM_CREDENTIAL_ID",
          "name": "Telegram Sullae Bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "={{ $json.message }}",
        "additionalFields": {
          "parse_mode": "Markdown"
        }
      },
      "id": "telegram-2",
      "name": "Send Telegram - Stats",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [650, 500],
      "credentials": {
        "telegramApi": {
          "id": "YOUR_TELEGRAM_CREDENTIAL_ID",
          "name": "Telegram Sullae Bot"
        }
      }
    }
  ],
  "connections": {
    "Webhook - New Meeting": {
      "main": [
        [
          {
            "node": "Format Telegram Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook - Daily Stats": {
      "main": [
        [
          {
            "node": "Format Stats Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format Telegram Message": {
      "main": [
        [
          {
            "node": "Send Telegram - New Meeting",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format Stats Message": {
      "main": [
        [
          {
            "node": "Send Telegram - Stats",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "tags": [
    {
      "name": "ìˆ ë˜"
    },
    {
      "name": "Telegram"
    }
  ]
}
